package fr.xmalware.badblock.others.rabbit.receivers;

import com.google.gson.Gson;

import fr.badblock.ladder.api.Ladder;
import fr.badblock.ladder.api.entities.Player;
import fr.xmalware.badblock.docker.server.rabbitmq.listeners.abstracts.PacketListener;
import fr.xmalware.badblock.others.guardian.GuardianKick;

public class GuardianReceiveKickListener extends PacketListener {

	public GuardianReceiveKickListener() {
		super("guardian.kick", false);
	}

	@Override
	public void onPacketReceive(String string) {
		GuardianKick kick = new Gson().fromJson(string, GuardianKick.class);
		Player proxiedPlayer = Ladder.getInstance().getPlayer(kick.getUniqueId());
		if (proxiedPlayer != null) {
			proxiedPlayer.disconnect(kick.getMessage());
		}
	}

}
