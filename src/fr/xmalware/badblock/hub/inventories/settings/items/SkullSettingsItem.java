package fr.xmalware.badblock.hub.inventories.settings.items;

import java.util.Arrays;
import java.util.List;
import java.util.Map.Entry;

import org.bukkit.Material;
import org.bukkit.block.Block;
import org.bukkit.inventory.ItemStack;
import org.bukkit.inventory.meta.SkullMeta;
import org.bukkit.scoreboard.Team;

import fr.xmalware.badblock.hub.BadBlockHub;
import fr.xmalware.badblock.hub.inventories.ItemAction;
import fr.xmalware.badblock.hub.inventories.abstracts.CustomItem;
import fr.xmalware.badblock.hub.objects.HubPlayer;

public class SkullSettingsItem extends CustomItem {

	public SkullSettingsItem() {
		super("[name]", Material.SKULL_ITEM, (byte) 3);
	}
	
	@Override
	public void onClick(HubPlayer lobbyPlayer, ItemAction itemAction, Block clickedBlock) {
		
	}

	@Override
	public List<ItemAction> getActions() {
		return Arrays.asList(ItemAction.INVENTORY_DROP, ItemAction.INVENTORY_LEFT_CLICK, ItemAction.INVENTORY_RIGHT_CLICK, ItemAction.INVENTORY_WHEEL_CLICK);
	}

	@Override
	public ItemStack toItemStack(HubPlayer lobbyPlayer) {
		String o = "A";
		for (Entry<String, String> entry : BadBlockHub.getInstance().teamsGroup.entrySet())
			if (entry.getValue().equals(lobbyPlayer.getGroup()))
				o = entry.getKey();
		Team team = lobbyPlayer.getTeams().get(o);
		String prefix = lobbyPlayer.getGroup().equals("default") ? "Joueur" : team.getPrefix();
		ItemStack itemStack = build(Material.SKULL_ITEM, 1, (byte)3, "§b" + lobbyPlayer.getName(), "", "§7Rang: " + prefix, "§7BadCoins: §b0", "§7Points boutique: §b0");
		SkullMeta meta = (SkullMeta) itemStack.getItemMeta();
        meta.setOwner(lobbyPlayer.getName());
        itemStack.setItemMeta(meta);
        return itemStack;
	}
	
}
