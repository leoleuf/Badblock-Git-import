package fr.xmalware.badblock.hub.inventories.market.confirm;

import fr.badblock.gameapi.players.BadblockPlayer;
import fr.xmalware.badblock.hub.inventories.abstracts.inventories.CustomInventory;
import fr.xmalware.badblock.hub.inventories.market.ownitems.OwnableItem;
import fr.xmalware.badblock.hub.objects.HubPlayer;

public class ConfirmCreator {

	public static void buy(BadblockPlayer player, OwnableItem ownableItem) {
		if (ownableItem.has(player)) {
			player.sendTranslatedMessage("hub."  + ownableItem.getParent() + ".alreadyowned");
			return;
		}
		if (ownableItem.hasPermission() && !player.hasPermission("hub." + ownableItem.getConfigPrefix())) {
			player.sendTranslatedMessage("hub." + ownableItem.getConfigPrefix() + "nopermission");
			return;
		}
		int badcoins = player.getPlayerData().getBadcoins();
		if (badcoins < ownableItem.getNeededBadcoins()) {
			player.sendTranslatedMessage("hub.notenoughbadcoins", ownableItem.getNeededBadcoins() - badcoins);
			return;
		}
		HubPlayer hubPlayer = HubPlayer.get(player);
		hubPlayer.setBuyItem(ownableItem);
		CustomInventory.get(ConfirmCreatorInventory.class).open(player);
	}
	
}
