
package fr.xmalware.badblock.hub.inventories.cosmetics.mounts;

import org.bukkit.Bukkit;
import org.bukkit.Material;
import org.bukkit.entity.Entity;

import fr.badblock.gameapi.players.BadblockPlayer;
import fr.xmalware.badblock.hub.BadBlockHub;
import fr.xmalware.badblock.hub.inventories.cosmetics.particles.Wings;
import fr.xmalware.badblock.hub.riders.MountManager;
import fr.xmalware.badblock.hub.utils.TempScheduler;

public class PegasusMountItem extends MountItem {

	public PegasusMountItem() {
		super("pegasus", Material.getMaterial(383), (byte) 100);
	}

	@Override
	public boolean hasPermission() {
		return true;
	}
	
	@Override
	public void mount(BadblockPlayer player) {
		final Entity bEntity = MountManager.rideHorse(player, false);
		TempScheduler tempScheduler = new TempScheduler();
		tempScheduler.task = Bukkit.getScheduler().runTaskTimer(BadBlockHub.getInstance(), new Runnable() {
			@Override
			public void run() {
				if (!bEntity.isValid()) {
					tempScheduler.task.cancel();
					return;
				}
				Wings.SpawnWings2(bEntity);
			}
		}, 1L, 1L);
	}
	
}
