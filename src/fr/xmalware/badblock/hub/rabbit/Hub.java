package fr.xmalware.badblock.hub.rabbit;

import java.util.Collection;
import java.util.HashMap;
import java.util.Map;

import org.bukkit.inventory.ItemStack;

import lombok.Getter;
import lombok.Setter;

@Getter @Setter public class Hub {

	private static Map<Integer, Hub> hubs = new HashMap<>();
	
	private	int						id;
	private String 					hubName;
	private int						players;
	private int						slots;
	private long					keepAlive;
	private boolean 				opened;
	private Map<String, Integer>	ranks;
	private ItemStack				itemStack;
	
	public Hub(int id, String hubName) {
		this.setId(id);
		this.setHubName(hubName);
	}
	
	public void create() {
		create(this);
	}
	
	public void keepAlive(int players, int slots, boolean opened, Map<String, Integer> ranks) {
		this.setPlayers(players);
		this.setSlots(slots);
		this.setOpened(opened);
		this.setRanks(ranks);
		this.setKeepAlive(System.currentTimeMillis() + 10000L);
	}
	
	public boolean isOnline() {
		return this.isOpened() || this.getKeepAlive() > System.currentTimeMillis();
	}
	
	public static Hub get(int hubId) {
		return hubs.get(hubId);
	}
	
	public static void create(Hub hub) {
		hubs.put(hub.getId(), hub);
	}
	
	public static Collection<Hub> getHubs() {
		return hubs.values();
	}
	
}
