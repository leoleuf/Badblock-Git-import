package fr.xmalware.badblock.hub.commands;

import org.bukkit.Bukkit;
import org.bukkit.command.CommandSender;
import org.bukkit.entity.Player;

import fr.badblock.gameapi.GameAPI;
import fr.badblock.gameapi.command.AbstractCommand;
import fr.badblock.gameapi.players.BadblockPlayer;
import fr.badblock.gameapi.utils.i18n.TranslatableString;

public class MTPCommand extends AbstractCommand {
	public MTPCommand() {
		super("mtp", new TranslatableString("hub.mtp.help"), "hub.mtp");
	}

	@Override
	public boolean executeCommand(CommandSender sender, String[] args) {
		if (args.length == 1 && sender instanceof Player) {
			BadblockPlayer player = (BadblockPlayer) sender;
			
			Player pl = Bukkit.getPlayer(args[0]);
			if (pl == null || !pl.isOnline()) {
				player.sendTranslatedMessage("hub.mtp.disconnected", args[0]);
				return true;
			}
			player.teleport(pl);
			player.sendTranslatedMessage("hub.mtp.teleported", pl.getName());
			return true;
		} else if (args.length == 2) {
			Player pl = Bukkit.getPlayer(args[0]);
			
			if (pl == null || !pl.isOnline()) {
				GameAPI.i18n().sendMessage(sender, "hub.mtp.disconnected", args[0]);
				return true;
			}
			
			Player pl1 = Bukkit.getPlayer(args[1]);
			if (pl1 == null || !pl1.isOnline()) {
				GameAPI.i18n().sendMessage(sender, "hub.mtp.disconnected", args[1]);
				return true;
			}
			
			pl.teleport(pl1);
			GameAPI.i18n().sendMessage(sender, "hub.mtp.teleportedto", pl.getName(), pl1.getName());
			return true;
		}

		return false;
	}	
}
