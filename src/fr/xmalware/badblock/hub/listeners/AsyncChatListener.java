package fr.xmalware.badblock.hub.listeners;

import org.bukkit.Bukkit;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.player.AsyncPlayerChatEvent;

import fr.xmalware.badblock.hub.objects.HubPlayer;

public class AsyncChatListener extends _HubListener {

	@EventHandler
	public void onAsyncChat(AsyncPlayerChatEvent event) {
		Player player = event.getPlayer();
		HubPlayer lobbyPlayer = HubPlayer.get(player);
		event.setCancelled(true);
		for (Player pl : Bukkit.getOnlinePlayers()) {
			HubPlayer hubPlayer = HubPlayer.get(pl);
			pl.sendMessage(lobbyPlayer.getPrefix(hubPlayer) + player.getName() + " ยง7: " + lobbyPlayer.getSuffix(hubPlayer) + event.getMessage());
		}
	}
	
}
