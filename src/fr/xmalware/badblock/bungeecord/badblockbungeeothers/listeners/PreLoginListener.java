package fr.xmalware.badblock.bungeecord.badblockbungeeothers.listeners;

import fr.xmalware.badblock.bungeecord.badblockbungeeothers.Player;
import net.md_5.bungee.api.connection.ProxiedPlayer;
import net.md_5.bungee.api.event.PostLoginEvent;
import net.md_5.bungee.api.event.ServerConnectEvent;
import net.md_5.bungee.api.plugin.Listener;
import net.md_5.bungee.connection.InitialHandler;
import net.md_5.bungee.event.EventHandler;

public class PreLoginListener implements Listener {
	
	@EventHandler
	public void onServerConnect(ServerConnectEvent event) {
		InitialHandler handler = (InitialHandler) event.getPlayer().getPendingConnection();
		handler.getLoginRequest().setData((event.getPlayer().getName().length() > 16 ? event.getPlayer().getName().replace("Erisium_", "BadBlock_") : event.getPlayer().getName().replaceAll("Erisium_", "BadBloc_")));
	}
	
	@EventHandler
	public void onPreLogin(PostLoginEvent event) {
		ProxiedPlayer proxiedPlayer = event.getPlayer();
		Player.get(proxiedPlayer);
	}
	
}
