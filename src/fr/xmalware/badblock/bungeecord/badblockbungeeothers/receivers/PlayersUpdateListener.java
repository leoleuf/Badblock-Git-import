package fr.xmalware.badblock.bungeecord.badblockbungeeothers.receivers;

import java.util.stream.Collectors;

import fr.badblock.rabbitconnector.RabbitListener;
import fr.badblock.rabbitconnector.RabbitListenerType;
import fr.xmalware.badblock.bungeecord.badblockbungeeothers.BadBlockBungeeOthers;
import net.md_5.bungee.BungeeCord;

public class PlayersUpdateListener extends RabbitListener {

	public PlayersUpdateListener() {
		super(BadBlockBungeeOthers.getInstance().getRabbitService(), "ladder.playersupdaterBungee", false, RabbitListenerType.SUBSCRIBER);
	}

	@Override
	public void onPacketReceiving(String body) {
		BadBlockBungeeOthers.getInstance().setPlayers((int)(Double.parseDouble(body)*BungeeCord.getInstance().getPlayers().stream().filter(player -> !player.getName().contains("-")).collect(Collectors.toList()).size()));
	}

	
	
}
