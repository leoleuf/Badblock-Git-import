package fr.xmalware.badblock.bungeecord.badblockbungeeothers.receivers;

import fr.badblock.rabbitconnector.RabbitListener;
import fr.badblock.rabbitconnector.RabbitListenerType;
import fr.xmalware.badblock.bungeecord.badblockbungeeothers.BadBlockBungeeOthers;
import net.md_5.bungee.BungeeCord;

public class PlayersUpdateListener extends RabbitListener {

	// number of workers
	private double bungeeWorkers = 1;
	
	public PlayersUpdateListener() {
		super(BadBlockBungeeOthers.getInstance().getRabbitService(), "ladder.playersupdaterBungee", false, RabbitListenerType.SUBSCRIBER);
	}

	@Override
	public void onPacketReceiving(String body) {
		bungeeWorkers = Double.parseDouble(body);
		BadBlockBungeeOthers.getInstance().setPlayers((int)(bungeeWorkers * BungeeCord.getInstance().getPlayers().stream().filter(player -> !player.getName().contains("-")).count()));
	}

	
	
}
