package fr.xmalware.badblock.bungeecord.badblockbungeeothers.commands;

import java.net.InetSocketAddress;

import net.md_5.bungee.BungeeCord;
import net.md_5.bungee.api.CommandSender;
import net.md_5.bungee.api.config.ServerInfo;
import net.md_5.bungee.api.plugin.Command;

public class AddServerCommand extends Command {
	
	public AddServerCommand() {
		super("addserver", "others.addserver");
	}

	@SuppressWarnings("deprecation")
	@Override
	public void execute(CommandSender sender, String[] args) {
		try {
			if (args.length != 2) {
				sender.sendMessage("§cUtilisation: /addserver <name> <ip:port>");
				return;
			}
			ServerInfo server = BungeeCord.getInstance().constructServerInfo(args[0], new InetSocketAddress(args[1].split(":")[0], Integer.parseInt(args[1].split(":")[1])), args[0], false);
			BungeeCord.getInstance().getServers().put(args[0], server);
			sender.sendMessage("§aServeur '" + args[0] + "' ajouté!");
		} catch (Exception e) {
			e.printStackTrace();
		}
	}
	
}
